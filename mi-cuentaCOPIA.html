<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Cuenta - Ecosistema Informacional</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@700;900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://unpkg.com/heroicons@2.0.18/24/outline/index.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-mobile.css">
</head>
<!-- === Simulaci√≥n de inicio de sesi√≥n con control de inactividad === -->

<!-- Modal de login -->
<div id="login-modal" class="login-modal">
  <div class="login-overlay"></div>
  <div class="login-box">
    <h3>üîí Inicia sesi√≥n</h3>
    <p>Por seguridad, ingresa tus credenciales institucionales.</p>
    <form id="login-form">
      <label for="username">Usuario</label>
      <input type="text" id="username" placeholder="Correo institucional" required>
      <label for="password">Contrase√±a</label>
      <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
      <button type="submit">Iniciar sesi√≥n</button>
    </form>
  </div>
</div>

<!-- Bot√≥n de cierre de sesi√≥n -->
<a href="#" id="logout-btn" class="logout-link">Cerrar sesi√≥n</a>

<style>
/* === Estilos del modal de autenticaci√≥n === */
.login-modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.login-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
}

.login-box {
  position: relative;
  background: #fff;
  padding: 30px 40px;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
  z-index: 10000;
  width: 320px;
  text-align: center;
}

.login-box h3 {
  margin-bottom: 10px;
}

.login-box label {
  display: block;
  text-align: left;
  font-weight: 600;
  margin-top: 10px;
}

.login-box input {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

.login-box button {
  margin-top: 15px;
  width: 100%;
  padding: 10px;
  background-color: #004b8d;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

.login-box button:hover {
  background-color: #003a6d;
}

.logout-link {
  display: inline-block;
  margin: 15px;
  color: #004b8d;
  font-weight: 600;
  text-decoration: none;
}

.logout-link:hover {
  text-decoration: underline;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const modal = document.getElementById('login-modal');
  const form = document.getElementById('login-form');
  const logoutBtn = document.getElementById('logout-btn');
  let inactivityTimer;

  // === Mostrar / Ocultar modal ===
  const showLogin = () => modal.style.display = 'flex';
  const hideLogin = () => modal.style.display = 'none';

  // === Gesti√≥n de sesi√≥n ===
  const startSession = () => {
    localStorage.setItem('sessionActive', 'true');
    localStorage.setItem('lastActivity', Date.now());
  };

  const clearSession = () => {
    localStorage.removeItem('sessionActive');
    localStorage.removeItem('lastActivity');
  };

  const isSessionActive = () => localStorage.getItem('sessionActive') === 'true';

  // === Control de inactividad ===
  function resetInactivityTimer() {
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(() => {
      clearSession();
      showLogin();
    }, 2 * 60 * 1000); // 2 minutos
    localStorage.setItem('lastActivity', Date.now());
  }

  // === Detectar actividad del usuario ===
  ['click', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(evt => {
    document.addEventListener(evt, () => {
      if (isSessionActive()) resetInactivityTimer();
    });
  });

  // === Iniciar sesi√≥n ===
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const user = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();

    if (user && pass) {
      startSession();
      hideLogin();
      resetInactivityTimer();
    } else {
      alert('Por favor, completa todos los campos.');
    }
  });

  // === Cerrar sesi√≥n manualmente ===
  logoutBtn.addEventListener('click', (e) => {
    e.preventDefault();
    clearSession();
    clearTimeout(inactivityTimer);
    showLogin();
  });

  // === Control inicial al cargar ===
  const lastActivity = parseInt(localStorage.getItem('lastActivity') || 0, 10);
  const now = Date.now();

  // Si no hay sesi√≥n activa o ya expir√≥
  if (!isSessionActive() || now - lastActivity > 2 * 60 * 1000) {
    clearSession(); // Limpieza forzada
    showLogin();
  } else {
    hideLogin();
    resetInactivityTimer();
  }
});
</script>


<body>
    <div class="header-wrapper">
        <header class="header container">
            <a href="index.html" class="logo">Ecosistema Informacional</a>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">Inicio</a></li> 
                    <li><a href="buscar.html">Buscar y Descubrir</a></li> 
                    <li><a href="servicios.html">Servicios</a></li> 
                    <li><a href="apoyo-ayuda.html">Apoyo y Ayuda</a></li>
                    <li><a href="sobre-nosotros.html">Sobre Nosotros</a></li>
                    <li><a href="normas-politicas.html">Normas y Pol√≠ticas</a></li>
                </ul>
            </nav>
            <button class="mobile-menu-toggle" id="mobile-menu-btn" aria-label="Abrir men√∫">
                <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
            </button>
            <a href="index.html" class="btn-cta">Cerrar Sesi√≥n</a>
        </header>
    </div>
    <nav class="mobile-nav" id="mobile-nav">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="buscar.html">Buscar y Descubrir</a></li>
            <li><a href="servicios.html">Servicios</a></li>
            <li><a href="apoyo-ayuda.html">Apoyo y Ayuda</a></li>
            <li><a href="sobre-nosotros.html">Sobre Nosotros</a></li>
            <li><a href="normas-politicas.html">Normas y Pol√≠ticas</a></li>
        </ul>
    </nav>
    <main>
        <section class="page-header">
            <div class="container" style="text-align: left;">
                <h1>Mi Cuenta</h1>
            </div>
        </section>
        <div class="dashboard-layout container">
            <aside class="dashboard-nav">
                <div class="user-info">
                    <img src="dcruz-foto.png" alt="Foto de perfil de Daniel Cruz" class="avatar">
                    <h3>Daniel Cruz Bautista</h3>
                    <p>dcruz@uacj.mx</p>
                </div>
                <ul id="dashboard-menu">
                    <li><a class="dashboard-nav-link active" data-target="panel-prestamos">Pr√©stamos Vigentes</a></li>
                    <li><a class="dashboard-nav-link" data-target="panel-favoritos">Favoritos y Listas</a></li>
                    <li><a class="dashboard-nav-link" data-target="panel-historial">Historial (B√∫squeda y Pr√©stamo)</a></li>
                    <li><a class="dashboard-nav-link" data-target="panel-solicitudes">Solicitudes Realizadas</a></li>
                    <li><a class="dashboard-nav-link" data-target="panel-constancias">Constancias y Tr√°mites</a></li>
                    <li><a class="dashboard-nav-link" data-target="panel-certificados">Certificados de Cursos</a></li>
                    <li><a class="dashboard-nav-link" data-target="panel-perfil">Perfil y Notificaciones</a></li>
                </ul>
            </aside>
            <section class="dashboard-content">
                <div id="panel-prestamos" class="dashboard-panel active">
                    <h2>Pr√©stamos Vigentes</h2>
                    <p>Aqu√≠ puedes ver el estado de tus pr√©stamos actuales y renovarlos.</p>
                    <div class="loan-list">
                        <div class="loan-card">
                            <div class="loan-cover-placeholder">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 40px; height: 40px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>
                            </div>
                            <div class="loan-info">
                                <h3>Introducci√≥n al Marketing Digital</h3>
                                <p><strong>Autor:</strong> Philip Kotler</p>
                                <p><strong>Fecha de Pr√©stamo:</strong> 15 de Octubre, 2025</p>
                                <p><strong>Fecha de Devoluci√≥n:</strong> 31 de Octubre, 2025</p>
                                <div class="loan-actions">
                                    <a href="#" class="btn-small">Renovar</a>
                                </div>
                            </div>
                        </div>
                        <div class="loan-card">
                            <div class="loan-cover-placeholder">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 40px; height: 40px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>
                            </div>
                            <div class="loan-info">
                                <h3>Inteligencia Artificial: Un Enfoque Moderno</h3>
                                <p><strong>Autor:</strong> Stuart Russell</p>
                                <p><strong>Fecha de Pr√©stamo:</strong> 18 de Octubre, 2025</p>
                                <p class="due-soon"><strong>Fecha de Devoluci√≥n:</strong> 3 de Noviembre, 2025 (¬°Vence pronto!)</p>
                                <div class="loan-actions">
                                    <a href="#" class="btn-small">Renovar</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="panel-favoritos" class="dashboard-panel">
                    <h2>Favoritos y Listas</h2>
                    <p>Art√≠culos, libros y b√∫squedas que has guardado.</p>
                </div>
                <div id="panel-historial" class="dashboard-panel">
                    <h2>Historial</h2>
                    <p>Tu historial de pr√©stamos y b√∫squedas anteriores.</p>
                </div>
                <div id="panel-solicitudes" class="dashboard-panel">
                    <h2>Solicitudes Realizadas</h2>
                    <p>Estado de tus pr√©stamos interbibliotecarios o solicitudes de digitalizaci√≥n.</p>
                </div>
                <div id="panel-constancias" class="dashboard-panel">
                    <h2>Constancias y Tr√°mites</h2>
                    <p>Genera tus documentos oficiales de biblioteca aqu√≠.</p>

                    <!-- Alerta importante -->
                    <div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 20px; margin-bottom: 25px;">
                        <h4 style="color: #856404; margin: 0 0 10px 0; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle"></i>
                            Importante: Requisitos para Constancia de No Adeudo
                        </h4>
                        <ul style="color: #856404; margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>Disponibilidad:</strong> Esta constancia solo estar√° disponible si est√°s libre de adeudos de material y multas.</li>
                            <li><strong>Suspensi√≥n de servicios:</strong> Al momento de solicitar la constancia, tu servicio de pr√©stamo ser√° suspendido autom√°ticamente.</li>
                        </ul>
                    </div>

                    <div class="constancia-box">
                        <h3>Constancia de No Adeudo</h3>
                        <p>Genera un documento PDF oficial que certifica que no tienes adeudos de material o multas pendientes.</p>

                        <!-- Estado del usuario -->
                        <div id="user-status" style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 6px; padding: 15px; margin: 15px 0;">
                            <p style="margin: 0; color: #155724;">
                                <i class="fas fa-check-circle"></i>
                                <strong>Estado actual:</strong> Sin adeudos pendientes. Puedes solicitar tu constancia.
                            </p>
                        </div>

                        <button class="btn-generate" id="generate-constancia">
                            Generar Constancia (Suspender√° pr√©stamos)
                        </button>
                    </div>
                    <h3 style="margin-top: 40px; color: var(--color-texto);">Historial de Solicitudes</h3>
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Documento</th>
                                <th>Fecha de Solicitud</th>
                                <th>Estado</th>
                                <th>Descarga</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Constancia de No Adeudo</td>
                                <td>15 de Mayo, 2025</td>
                                <td>Expirado</td>
                                <td>-</td>
                            </tr>
                            <tr>
                                <td>Constancia de No Adeudo</td>
                                <td>28 de Octubre, 2025</td>
                                <td>Vigente</td>
                                <td><a href="#" class="btn-small">Descargar PDF</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                </div>
                <div id="panel-certificados" class="dashboard-panel">
                    <h2>Certificados de Cursos</h2>
                    <p>Descarga los certificados de los talleres de ALFIN que has completado.</p>
                </div>
                <div id="panel-perfil" class="dashboard-panel">
                    <h2>Perfil y Notificaciones</h2>
                    <p>Configura tu correo electr√≥nico y tus preferencias de notificaci√≥n.</p>
                </div>
            </section>
<section class="suggestions-ia container" style="margin-top: 40px;">
      <h2 style="text-align:left;">Sugerencias para ti por IA</h2>
      <div class="swiper suggestions-carousel">
        <div class="swiper-wrapper">
          <!-- Sugerencia 1 -->
          <div class="swiper-slide">
            <div class="book-card">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg" alt="Portada gen√©rica" style="width:100%;max-width:110px;display:block;margin:0 auto 10px;">
              <h4>Deep Learning</h4>
              <p>Ian Goodfellow, Yoshua Bengio | MIT Press</p>
              <a href="#" class="btn-solicitar">Solicitar</a>
            </div>
          </div>
          <!-- Sugerencia 2 -->
          <div class="swiper-slide">
            <div class="book-card">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg" alt="Portada gen√©rica" style="width:100%;max-width:110px;display:block;margin:0 auto 10px;">
              <h4>Nature</h4>
              <p>Revista l√≠der en ciencia y tecnolog√≠a.</p>
              <a href="https://www.nature.com/" class="btn-solicitar" target="_blank">Ir a Revista</a>
            </div>
          </div>
          <!-- Sugerencia 3 -->
          <div class="swiper-slide">
            <div class="book-card">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg" alt="Portada gen√©rica" style="width:100%;max-width:110px;display:block;margin:0 auto 10px;">
              <h4>Artificial Intelligence: A Modern Approach</h4>
              <p>Russell & Norvig | Pearson</p>
              <a href="#" class="btn-solicitar">Solicitar</a>
            </div>
          </div>
          <!-- Sugerencia 4 -->
          <div class="swiper-slide">
            <div class="book-card">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg" alt="Portada gen√©rica" style="width:100%;max-width:110px;display:block;margin:0 auto 10px;">
              <h4>Science</h4>
              <p>Revista internacional de investigaci√≥n cient√≠fica.</p>
              <a href="https://www.science.org/journal/science" class="btn-solicitar" target="_blank">Ir a Revista</a>
            </div>
          </div>
          <!-- Sugerencia 5 -->
          <div class="swiper-slide">
            <div class="book-card">
              <img src="https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg" alt="Portada gen√©rica" style="width:100%;max-width:110px;display:block;margin:0 auto 10px;">
              <h4>Machine Learning: A Probabilistic Perspective</h4>
              <p>Kevin P. Murphy | MIT Press</p>
              <a href="#" class="btn-solicitar">Solicitar</a>
            </div>
          </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
      </div>
    </section>
        </div>
    </main>
    <footer class="footer">
        <div class="container">
            <div class="footer-col"><h4 class="logo" style="color: var(--color-blanco);">Ecosistema Informacional</h4><p>Av. Plutarco El√≠as Calles #1210<br>Fovissste Chamizal, C.P. 32310</p></div>
            <div class="footer-col"><h4>Enlaces R√°pidos</h4><ul><li><a href="sobre-nosotros.html">Sobre Nosotros</a></li><li><a href="https://catalogo.uacj.mx/">Cat√°logo</a></li><li><a href="servicios.html">Servicios</a></li><li><a href="apoyo-ayuda.html">Contacto</a></li></ul></div>
            <div class="footer-col"><h4>Recursos</h4><ul><li><a href="bases-de-datos.html">Bases de Datos</a></li><li><a href="#">Repositorio</a></li><li><a href="guias-tematicas.html">Gu√≠as Tem√°ticas</a></li><li><a href="#">Preguntas Frecuentes</a></li></ul></div>
            <div class="footer-col">
                <h4>Redes Sociales</h4>
                <ul class="footer-social-icons">
                    <li><a href="#" aria-label="Facebook" title="Facebook"><i class="fa-brands fa-facebook"></i></a></li>
                    <li><a href="#" aria-label="Twitter" title="Twitter"><i class="fa-brands fa-x-twitter"></i></a></li>
                    <li><a href="#" aria-label="Instagram" title="Instagram"><i class="fa-brands fa-instagram"></i></a></li>
                </ul>
            </div>
        </div>
    </footer>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
      if (document.querySelector('.suggestions-carousel')) {
        new Swiper('.suggestions-carousel', {
          slidesPerView: 1,
          spaceBetween: 20,
          loop: true,
          autoplay: {
            delay: 3000,
            disableOnInteraction: false,
          },
          pagination: {
            el: '.swiper-pagination',
            clickable: true
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev'
          },
          breakpoints: {
            640: { slidesPerView: 2, spaceBetween: 15 },
            1024: { slidesPerView: 3, spaceBetween: 20 }
          }
        });
      }
    </script>

    <script>
    // JavaScript para navegaci√≥n del dashboard
    document.addEventListener('DOMContentLoaded', function() {
        const navLinks = document.querySelectorAll('.dashboard-nav-link');
        const panels = document.querySelectorAll('.dashboard-panel');

        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remover clase active de todos los enlaces
                navLinks.forEach(l => l.classList.remove('active'));
                
                // Agregar clase active al enlace clickeado
                this.classList.add('active');
                
                // Ocultar todos los paneles
                panels.forEach(panel => panel.classList.remove('active'));
                
                // Mostrar el panel correspondiente
                const targetId = this.getAttribute('data-target');
                const targetPanel = document.getElementById(targetId);
                if (targetPanel) {
                    targetPanel.classList.add('active');
                }
            });
        });

        // JavaScript para generar constancia
        const btnGenerate = document.getElementById('generate-constancia');
        if (btnGenerate) {
            btnGenerate.addEventListener('click', function() {
                // Validar si el usuario tiene adeudos (esto se har√≠a con tu backend)
                const tieneAdeudos = false; // Cambiar seg√∫n consulta real

                if (tieneAdeudos) {
                    alert('No puedes generar la constancia porque tienes adeudos pendientes. Por favor, regulariza tu situaci√≥n primero.');
                    return;
                }

                const confirmar = confirm(
                    '‚ö†Ô∏è IMPORTANTE:\n\n' +
                    '‚Ä¢ Al generar esta constancia, tu servicio de pr√©stamo ser√° SUSPENDIDO temporalmente.\n' +
                    '‚Ä¢ No podr√°s solicitar nuevos pr√©stamos hasta que la constancia expire (30 d√≠as) o sea utilizada.\n' +
                    '‚Ä¢ La constancia certifica que actualmente no tienes adeudos.\n\n' +
                    '¬øDeseas continuar?'
                );

                if (confirmar) {
                    alert('Constancia generada exitosamente.\n\nTu servicio de pr√©stamo ha sido suspendido temporalmente.\nRecibir√°s el PDF por correo electr√≥nico.');

                    // Actualizar el estado visualmente
                    const statusDiv = document.getElementById('user-status');
                    if (statusDiv) {
                        statusDiv.innerHTML = `
                            <p style="margin: 0; color: #856404;">
                                <i class="fas fa-pause-circle"></i>
                                <strong>Estado actual:</strong> Servicio de pr√©stamo suspendido por constancia vigente.
                            </p>
                        `;
                    }
                }
            });
        }
    });
    </script>
</body>
</html>